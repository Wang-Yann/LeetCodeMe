#!/usr/bin/env python
# -*- coding: utf-8 -*-
# @Author        : Rock Wayne 
# @Created       : 2020-04-26 18:02:58
# @Last Modified : 2020-04-26 18:02:58
# @Mail          : rock@get.com.mm
# @Version       : alpha-1.0

# ç»™å‡ºä¸€ä¸ªéæŠ¢å å•çº¿ç¨‹CPUçš„ n ä¸ªå‡½æ•°è¿è¡Œæ—¥å¿—ï¼Œæ‰¾åˆ°å‡½æ•°çš„ç‹¬å æ—¶é—´ã€‚
#
#  æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ Idï¼Œä» 0 åˆ° n-1ï¼Œå‡½æ•°å¯èƒ½ä¼šé€’å½’è°ƒç”¨æˆ–è€…è¢«å…¶ä»–å‡½æ•°è°ƒç”¨ã€‚
#
#  æ—¥å¿—æ˜¯å…·æœ‰ä»¥ä¸‹æ ¼å¼çš„å­—ç¬¦ä¸²ï¼šfunction_idï¼šstart_or_endï¼štimestampã€‚ä¾‹å¦‚ï¼š"0:start:0" è¡¨ç¤ºå‡½æ•° 0 ä» 0 æ—¶åˆ»
# å¼€å§‹è¿è¡Œã€‚"0:end:0" è¡¨ç¤ºå‡½æ•° 0 åœ¨ 0 æ—¶åˆ»ç»“æŸã€‚
#
#  å‡½æ•°çš„ç‹¬å æ—¶é—´å®šä¹‰æ˜¯åœ¨è¯¥æ–¹æ³•ä¸­èŠ±è´¹çš„æ—¶é—´ï¼Œè°ƒç”¨å…¶ä»–å‡½æ•°èŠ±è´¹çš„æ—¶é—´ä¸ç®—è¯¥å‡½æ•°çš„ç‹¬å æ—¶é—´ã€‚ä½ éœ€è¦æ ¹æ®å‡½æ•°çš„ Id æœ‰åºåœ°è¿”å›æ¯ä¸ªå‡½æ•°çš„ç‹¬å æ—¶é—´ã€‚
#
#  ç¤ºä¾‹ 1:
#
#  è¾“å…¥:
# n = 2
# logs =
# ["0:start:0",
#  "1:start:2",
#  "1:end:5",
#  "0:end:6"]
# è¾“å‡º:[3, 4]
# è¯´æ˜ï¼š
# å‡½æ•° 0 åœ¨æ—¶åˆ» 0 å¼€å§‹ï¼Œåœ¨æ‰§è¡Œäº†  2ä¸ªæ—¶é—´å•ä½ç»“æŸäºæ—¶åˆ» 1ã€‚
# ç°åœ¨å‡½æ•° 0 è°ƒç”¨å‡½æ•° 1ï¼Œå‡½æ•° 1 åœ¨æ—¶åˆ» 2 å¼€å§‹ï¼Œæ‰§è¡Œ 4 ä¸ªæ—¶é—´å•ä½åç»“æŸäºæ—¶åˆ» 5ã€‚
# å‡½æ•° 0 å†æ¬¡åœ¨æ—¶åˆ» 6 å¼€å§‹æ‰§è¡Œï¼Œå¹¶åœ¨æ—¶åˆ» 6 ç»“æŸè¿è¡Œï¼Œä»è€Œæ‰§è¡Œäº† 1 ä¸ªæ—¶é—´å•ä½ã€‚
# æ‰€ä»¥å‡½æ•° 0 æ€»å…±çš„æ‰§è¡Œäº† 2 +1 =3 ä¸ªæ—¶é—´å•ä½ï¼Œå‡½æ•° 1 æ€»å…±æ‰§è¡Œäº† 4 ä¸ªæ—¶é—´å•ä½ã€‚
#
#
#  è¯´æ˜ï¼š
#
#
#  è¾“å…¥çš„æ—¥å¿—ä¼šæ ¹æ®æ—¶é—´æˆ³æ’åºï¼Œè€Œä¸æ˜¯æ ¹æ®æ—¥å¿—Idæ’åºã€‚
#  ä½ çš„è¾“å‡ºä¼šæ ¹æ®å‡½æ•°Idæ’åºï¼Œä¹Ÿå°±æ„å‘³ç€ä½ çš„è¾“å‡ºæ•°ç»„ä¸­åºå·ä¸º 0 çš„å…ƒç´ ç›¸å½“äºå‡½æ•° 0 çš„æ‰§è¡Œæ—¶é—´ã€‚
#  ä¸¤ä¸ªå‡½æ•°ä¸ä¼šåœ¨åŒæ—¶å¼€å§‹æˆ–ç»“æŸã€‚
#  å‡½æ•°å…è®¸è¢«é€’å½’è°ƒç”¨ï¼Œç›´åˆ°è¿è¡Œç»“æŸã€‚
#  1 <= n <= 100
#
#  Related Topics æ ˆ
#  ğŸ‘ 67 ğŸ‘ 0

from typing import List


class Solution:
    def exclusiveTime(self, n: int, logs: List[str]) -> List[int]:
        """
        åœ¨é‡åˆ°ä¸€æ¡åŒ…å« start çš„æ—¥å¿—æ—¶ï¼Œæˆ‘ä»¬å°†å¯¹åº”çš„å‡½æ•° id å…¥æ ˆï¼›
        åœ¨é‡åˆ°ä¸€æ¡åŒ…å« end çš„æ—¥å¿—æ—¶ï¼Œæˆ‘ä»¬å°†å¯¹åº”çš„å‡½æ•° id å‡ºæ ˆ
        https://leetcode-cn.com/problems/exclusive-time-of-functions/solution/han-shu-de-du-zhan-shi-jian-by-leetcode/
        """
        result = [0] * n
        stack, prev = [], 0
        for log in logs:
            function_id, start_or_end, timestamp = log.split(":")
            if start_or_end == "start":
                if stack:
                    result[stack[-1]] += int(timestamp) - prev
                stack.append(int(function_id))
                prev = int(timestamp)
            else:
                result[stack.pop()] += int(timestamp) - prev + 1
                prev = int(timestamp) + 1
        return result


if __name__ == '__main__':
    sol = Solution()
    samples = [
        dict(n=2, logs=["0:start:0",
                        "1:start:2",
                        "1:end:5",
                        "0:end:6"])

    ]
    lists = [x for x in samples]
    res = [sol.exclusiveTime(**x) for x in lists]
    print(res)

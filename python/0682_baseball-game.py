#!/usr/bin/env python
# -*- coding: utf-8 -*-
# @Author        : Rock Wayne 
# @Created       : 2020-04-26 18:24:57
# @Last Modified : 2020-04-26 18:24:57
# @Mail          : rock@get.com.mm
# @Version       : alpha-1.0


"""
# ä½ çŽ°åœ¨æ˜¯æ£’çƒæ¯”èµ›è®°å½•å‘˜ã€‚
# ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²å¯ä»¥æ˜¯ä»¥ä¸‹å››ç§ç±»åž‹ä¹‹ä¸€ï¼š
# 1.æ•´æ•°ï¼ˆä¸€è½®çš„å¾—åˆ†ï¼‰ï¼šç›´æŽ¥è¡¨ç¤ºæ‚¨åœ¨æœ¬è½®ä¸­èŽ·å¾—çš„ç§¯åˆ†æ•°ã€‚
# 2. "+"ï¼ˆä¸€è½®çš„å¾—åˆ†ï¼‰ï¼šè¡¨ç¤ºæœ¬è½®èŽ·å¾—çš„å¾—åˆ†æ˜¯å‰ä¸¤è½®æœ‰æ•ˆ å›žåˆå¾—åˆ†çš„æ€»å’Œã€‚
# 3. "D"ï¼ˆä¸€è½®çš„å¾—åˆ†ï¼‰ï¼šè¡¨ç¤ºæœ¬è½®èŽ·å¾—çš„å¾—åˆ†æ˜¯å‰ä¸€è½®æœ‰æ•ˆ å›žåˆå¾—åˆ†çš„ä¸¤å€ã€‚
# 4. "C"ï¼ˆä¸€ä¸ªæ“ä½œï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªå›žåˆçš„åˆ†æ•°ï¼‰ï¼šè¡¨ç¤ºæ‚¨èŽ·å¾—çš„æœ€åŽä¸€ä¸ªæœ‰æ•ˆ å›žåˆçš„åˆ†æ•°æ˜¯æ— æ•ˆçš„ï¼Œåº”è¯¥è¢«ç§»é™¤ã€‚
#
# æ¯ä¸€è½®çš„æ“ä½œéƒ½æ˜¯æ°¸ä¹…æ€§çš„ï¼Œå¯èƒ½ä¼šå¯¹å‰ä¸€è½®å’ŒåŽä¸€è½®äº§ç”Ÿå½±å“ã€‚
# ä½ éœ€è¦è¿”å›žä½ åœ¨æ‰€æœ‰å›žåˆä¸­å¾—åˆ†çš„æ€»å’Œã€‚
#
#  ç¤ºä¾‹ 1:
#
#  è¾“å…¥: ["5","2","C","D","+"]
# è¾“å‡º: 30
# è§£é‡Š:
# ç¬¬1è½®ï¼šä½ å¯ä»¥å¾—åˆ°5åˆ†ã€‚æ€»å’Œæ˜¯ï¼š5ã€‚
# ç¬¬2è½®ï¼šä½ å¯ä»¥å¾—åˆ°2åˆ†ã€‚æ€»å’Œæ˜¯ï¼š7ã€‚
# æ“ä½œ1ï¼šç¬¬2è½®çš„æ•°æ®æ— æ•ˆã€‚æ€»å’Œæ˜¯ï¼š5ã€‚
# ç¬¬3è½®ï¼šä½ å¯ä»¥å¾—åˆ°10åˆ†ï¼ˆç¬¬2è½®çš„æ•°æ®å·²è¢«åˆ é™¤ï¼‰ã€‚æ€»æ•°æ˜¯ï¼š15ã€‚
# ç¬¬4è½®ï¼šä½ å¯ä»¥å¾—åˆ°5 + 10 = 15åˆ†ã€‚æ€»æ•°æ˜¯ï¼š30ã€‚
#
#
#  ç¤ºä¾‹ 2:
#
#  è¾“å…¥: ["5","-2","4","C","D","9","+","+"]
# è¾“å‡º: 27
# è§£é‡Š:
# ç¬¬1è½®ï¼šä½ å¯ä»¥å¾—åˆ°5åˆ†ã€‚æ€»å’Œæ˜¯ï¼š5ã€‚
# ç¬¬2è½®ï¼šä½ å¯ä»¥å¾—åˆ°-2åˆ†ã€‚æ€»æ•°æ˜¯ï¼š3ã€‚
# ç¬¬3è½®ï¼šä½ å¯ä»¥å¾—åˆ°4åˆ†ã€‚æ€»å’Œæ˜¯ï¼š7ã€‚
# æ“ä½œ1ï¼šç¬¬3è½®çš„æ•°æ®æ— æ•ˆã€‚æ€»æ•°æ˜¯ï¼š3ã€‚
# ç¬¬4è½®ï¼šä½ å¯ä»¥å¾—åˆ°-4åˆ†ï¼ˆç¬¬ä¸‰è½®çš„æ•°æ®å·²è¢«åˆ é™¤ï¼‰ã€‚æ€»å’Œæ˜¯ï¼š-1ã€‚
# ç¬¬5è½®ï¼šä½ å¯ä»¥å¾—åˆ°9åˆ†ã€‚æ€»æ•°æ˜¯ï¼š8ã€‚
# ç¬¬6è½®ï¼šä½ å¯ä»¥å¾—åˆ°-4 + 9 = 5åˆ†ã€‚æ€»æ•°æ˜¯13ã€‚
# ç¬¬7è½®ï¼šä½ å¯ä»¥å¾—åˆ°9 + 5 = 14åˆ†ã€‚æ€»æ•°æ˜¯27ã€‚
#
#
#  æ³¨æ„ï¼š
#
#
#  è¾“å…¥åˆ—è¡¨çš„å¤§å°å°†ä»‹äºŽ1å’Œ1000ä¹‹é—´ã€‚
#  åˆ—è¡¨ä¸­çš„æ¯ä¸ªæ•´æ•°éƒ½å°†ä»‹äºŽ-30000å’Œ30000ä¹‹é—´ã€‚
#
#  Related Topics æ ˆ
#  ðŸ‘ 134 ðŸ‘Ž 0

"""
from typing import List


class Solution:
    def calPoints(self, ops: List[str]) -> int:
        stack = []
        for char in ops:
            if char == "C":
                stack.pop()
            elif char == "D":
                v = stack[-1] * 2
                stack.append(v)
            elif char == "+":
                stack.append(stack[-1]+stack[-2])
            else:
                stack.append(int(char))
        # print("stack",stack)
        return sum(stack)


if __name__ == '__main__':
    sol = Solution()
    samples = [
        # ["5", "2", "C", "D", "+"],
        ["5", "-2", "4", "C", "D", "9", "+", "+"],
        ["57", "D", "-3", "-58", "D", "77", "+", "C", "+", "+", "38", "78", "-6", "24", "-46", "+",
         "31", "20", "D", "-81"]

    ]
    lists = [x for x in samples]
    res = [sol.calPoints(x) for x in lists]
    print(res)
